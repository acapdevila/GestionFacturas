@using GestionFacturas.Website.Helpers
@model GestionFacturas.Website.Viewmodels.Facturas.ListaGestionFacturasViewModel
    

@{
    ViewBag.Title = "Lista de facturas";
}

<h2>Facturas</h2>


<div class="panel panel-default">

    <div class="panel-heading">
        @Html.ActionLink("Crear nueva factura", "Crear", null, new { @class = "btn btn-primary" })
    </div>

    <div class="panel-body">
        @Html.EditorFor(m => m.FiltroBusqueda, "FiltroBusquedaFactura")
    </div>
  
            <table class="table table-striped">
                <tr>
                    <th>
                        Factura
                    </th>
                    <th>
                        Fecha
                    </th>
                    <th>
                        Conceptos
                    </th>
                    <th>
                        Estado
                    </th>
                    <th>
                        BI
                    </th>
                    <th>
                        IVA
                    </th>
                    <th>
                        Total
                    </th>
                    <th>
                        Cliente
                    </th>

                    <th></th>
                </tr>

                @foreach (var item in Model.ListaFacturas)
            {
                <tr>
                    <td>
                        @Html.ActionLink(item.NumeroFactura, "Detalles", new { id = item.Id })
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.FechaEmisionFactura, "FechaCorta")
                    </td>
                    <td class="col-md-4 col-sm-4 col-lg-4">
                       <span title="@item.ResumenDescripciones">@item.ResumenDescripciones.TruncarConElipsis(50)</span>
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.EstadoFactura)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.BaseImponible, "Moneda")
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Impuestos, "Moneda")
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.ImporteTotal, "Moneda")
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.CompradorNombreOEmpresa)
                    </td>
                    <td>
                        @Html.ActionLink("Editar", "Editar", new { id = item.Id }, new { @class = "btn btn-primary btn-sm" })
                        @Html.ActionLink("Eliminar", "Eliminar", new { id = item.Id })
                    </td>
                </tr>
                }

            </table>
    
</div>
